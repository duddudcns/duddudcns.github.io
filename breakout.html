<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script>
        document.documentElement.classList.add('i18n-pending');
        try {
            const savedLanguage = localStorage.getItem('site_language');
            if (savedLanguage) document.documentElement.lang = savedLanguage;
        } catch (_) { }
    </script>
    <title data-i18n="home.breakout.name">ë²½ëŒê¹¨ê¸°</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/games/breakout.css">
    <script src="js/i18n.js" defer></script>
    <script src="js/firebaseConfig.js" defer></script>
    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js" defer></script>
    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-auth-compat.js" defer></script>
    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore-compat.js" defer></script>
    <script src="js/services/authLeaderboard.js" defer></script>
</head>

<body>
    <div class="game-wrapper">
        <div class="lang-switcher">
            <label for="languageSelectBreakout" data-i18n="lang.label">ì–¸ì–´</label>
            <select id="languageSelectBreakout" data-language-select>
                <option value="ko">í•œêµ­ì–´</option>
                <option value="en">English</option>
            </select>
        </div>

        <div class="game-header">
            <h1><span data-i18n="home.breakout.name">ë²½ëŒê¹¨ê¸°</span> <span class="version-badge">ARCADE</span></h1>
        </div>

        <div class="game-content breakout-layout">
            <div class="board-container">
                <canvas id="gameCanvas"></canvas>
                <div id="statusOverlay" class="level-overlay" data-i18n="breakout.touchToStart">TOUCH TO START</div>
            </div>

            <div class="sidebar sidebar-stats">
                <div class="panel">
                    <div class="panel-label" data-i18n="breakout.score">ì ìˆ˜</div>
                    <div id="score" class="stat-value">000000</div>
                </div>

                <div class="panel">
                    <div class="panel-label" data-i18n="breakout.lives">ëª©ìˆ¨</div>
                    <div id="lives" class="stat-value">3</div>
                </div>

                <div class="panel">
                    <div class="panel-label" data-i18n="breakout.level">ë ˆë²¨</div>
                    <div id="level" class="stat-value">1</div>
                </div>

                <div class="panel">
                    <div class="button-group">
                        <button onclick="location.href='index.html'" style="background: #ff006e; color: white;"
                            data-i18n="common.home">ğŸ  í™ˆìœ¼ë¡œ</button>
                        <button onclick="window.game.resetGame()" data-i18n="common.restart">ì¬ì‹œì‘</button>
                    </div>
                </div>

                <div class="panel">
                    <div class="panel-label" data-i18n="common.account">ê³„ì •</div>
                    <div id="menuAuthStatus" class="auth-panel-status" data-i18n="auth.loggedOut">ë¡œê·¸ì¸ ì•ˆë¨</div>
                    <div class="auth-panel-buttons">
                        <button id="menuGoogleLoginBtn" data-i18n="auth.loginGoogle">Google ë¡œê·¸ì¸</button>
                        <button id="menuLogoutBtn" data-i18n="auth.logout">ë¡œê·¸ì•„ì›ƒ</button>
                    </div>
                </div>

                <div class="panel controls-info">
                    <div class="panel-label" data-i18n="common.controls">ì¡°ì‘ë°©ë²•</div>
                    <div data-i18n="breakout.control.move">â† / â†’ : íŒ¨ë“¤ ì´ë™</div>
                    <div data-i18n="breakout.control.launch">Space : ê³µ ë°œì‚¬</div>
                    <div data-i18n="breakout.control.mouse">ë§ˆìš°ìŠ¤/í„°ì¹˜ : íŒ¨ë“¤ ì´ë™</div>
                </div>
            </div>
        </div>
    </div>

    <div id="gameOverModal" class="modal">
        <div class="modal-content game-over-content">
            <div class="game-over-icon">ğŸ§±</div>
            <h2 data-i18n="breakout.gameOver">ê²Œì„ ì˜¤ë²„</h2>
            <div class="final-stats">
                <div class="stat-group">
                    <span class="stat-label" data-i18n="breakout.finalScore">ìµœì¢… ì ìˆ˜</span>
                    <span id="finalScore" class="stat-value">000000</span>
                </div>
            </div>
            <button class="primary-btn" onclick="window.game.resetGame()" data-i18n="breakout.retry">ë‹¤ì‹œ ì‹œì‘</button>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/matter-js/0.20.0/matter.min.js"></script>
    <script src="js/games/breakout/BreakoutEngine.js"></script>
    <script src="js/menu-auth.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const canvas = document.getElementById('gameCanvas');
            window.game = new BreakoutEngine(canvas);
            window.game.start();
        });
    </script>
</body>

</html>
